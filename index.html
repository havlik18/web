
<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reporty dodavatelů — Lukáš Havel</title>

  <style>
    :root {
      color-scheme: light dark;
      --bg: #f7f9fc;
      --bg-grad-1: #f7f9fc;
      --bg-grad-2: #eef3fb;
      --text: #1f2937;
      --muted: #6b7280;
      --card-bg: #ffffff;
      --border: #e5e7eb;
      --primary: #1565c0; /* modrá */
      --primary-weak: rgba(21, 101, 192, 0.12);
      --accent: #0fb9b1;  /* tyrkys */
      --accent-weak: rgba(15, 185, 177, 0.12);
      --warn: #ff7f0e;    /* oranžová */
      --warn-weak: rgba(255, 127, 14, 0.12);
      --shadow: 0 10px 24px rgba(31, 41, 55, 0.08);
      --radius: 14px;
    }
    /* Tmavý režim (zapíná se přepínačem) */
    .theme-dark {
      --bg: #0f141b;
      --bg-grad-1: #0f141b;
      --bg-grad-2: #111a22;
      --text: #e5e7eb;
      --muted: #94a3b8;
      --card-bg: #121924;
      --border: #1f2937;
      --primary: #4ea0ff;
      --primary-weak: rgba(78, 160, 255, 0.16);
      --accent: #54d5ce;
      --accent-weak: rgba(84, 213, 206, 0.16);
      --warn: #ffb74d;
      --warn-weak: rgba(255, 183, 77, 0.18);
      --shadow: 0 10px 28px rgba(0, 0, 0, 0.35);
    }

    html, body {
      height: 100%;
      background: linear-gradient(160deg, var(--bg-grad-1), var(--bg-grad-2));
      color: var(--text);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      line-height: 1.6;
    }
    body { margin: 0; padding: 24px; }

    /* Header */
    .page-header {
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 16px;
      margin-bottom: 16px;
    }
    h1 {
      font-size: clamp(22px, 3vw, 28px);
      margin: 0;
      letter-spacing: 0.2px;
    }
    .subtitle {
      margin: 4px 0 0;
      color: var(--muted);
      font-size: 14px;
    }
    .btn {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 10px 14px;
      background: var(--primary);
      color: #fff;
      border: none; border-radius: 10px;
      cursor: pointer; text-decoration: none;
      box-shadow: var(--shadow);
      transition: transform .08s ease, filter .2s ease;
    }
    .btn:hover { filter: brightness(1.08); }
    .btn:active { transform: scale(0.98); }
    .btn-outline {
      background: transparent; color: var(--primary);
      border: 1px solid var(--primary);
    }

    /* Layout */
    .grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 18px;
    }
    @media (min-width: 980px) {
      .grid { grid-template-columns: 340px 1fr; }
    }

    .card {
      background: var(--card-bg);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 16px;
    }
    .card h2 {
      margin: 0 0 10px;
      font-size: clamp(18px, 2.4vw, 22px);
    }

    /* Controls */
    label { font-weight: 600; display: block; margin-bottom: 6px; }
    .control {
      margin-bottom: 14px;
    }
    select, input[type="file"] {
      width: 100%;
      padding: 10px 12px;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: #fff;
      color: var(--text);
    }
    .hint { color: var(--muted); font-size: 13px; }

    /* Badge */
    .badge {
      display: inline-flex; align-items: center; gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: var(--accent-weak);
      color: var(--text);
      font-size: 12px;
      border: 1px solid var(--accent);
    }

    /* Table */
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    thead th {
      background: var(--primary-weak);
      color: var(--text);
      border-bottom: 1px solid var(--border);
      font-weight: 700;
      padding: 8px 10px;
    }
    tbody td, tfoot td {
      border-top: 1px solid var(--border);
      padding: 8px 10px;
      font-size: 14px;
    }
    tbody tr:hover { background: rgba(0,0,0,0.03); }

    /* Chart container */
    .chart-wrap {
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: linear-gradient(160deg, var(--card-bg), #fff);
      padding: 12px;
    }

    /* Footer */
    footer { margin-top: 16px; color: var(--muted); font-size: 13px; }

    /* Error */
    .error { color: #b00020; }
  </style>

  <!-- Lokální knihovny z repozitáře -->
  <script src="vendor/xlsx.full.min.jsendor/chart.umd.min.js</script>
</head>
<body>
  <!-- HLAVÍČKA -->
  <div class="page-header">
    <div>
      <h1>Reporty dodavatelů</h1>
      <p class="subtitle">Nahraj Excel (.xls / .xlsx) — A: Dodavatel · B: Datum · C: Počet · D: Obrat</p>
    </div>
    <div style="display:flex;gap:8px">
      <button id="toggle-theme" class="btn btn-outline" title="Přepnout světlý/tmavý režim">Tmavý / světlý</button>
      #Export CSV</a>
    </div>
  </div>

  <!-- DVOJITÝ PANEL -->
  <div class="grid">
    <!-- Ovládání -->
    <aside class="card">
      <h2>Ovládací panel</h2>

      <div class="control">
        <label for="file">1) Nahrát Excel soubor</label>
        <input type="file" id="file" accept=".xls,.xlsx" />
        <div id="fileInfo" class="hint" style="margin-top:6px"></div>
        <div id="error" class="error" style="margin-top:6px"></div>
      </div>

      <div class="control">
        <label for="supplier">2) Vyber dodavatele <span id="supBadge" class="badge" style="display:none;"></span></label>
        <select id="supplier" disabled>
          <option value="" selected>— nejprve nahraj soubor —</option>
        </select>
      </div>

      <div class="control">
        <label for="metric">3) Zobrazit metriky</label>
        <select id="metric">
          <option value="both" selected>Počet zásilek + Obrat</option>
          <option value="shipments">Pouze počet zásilek</option>
          <option value="revenue">Pouze obrat</option>
        </select>
      </div>

      <p class="hint">Tip: první řádek s textem považujeme za hlavičku a automaticky jej vynecháme.</p>
    </aside>

    <!-- Data + graf -->
    <main class="card">
